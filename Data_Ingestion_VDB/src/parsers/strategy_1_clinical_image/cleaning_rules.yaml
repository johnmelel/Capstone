################################
# Strategy 1 - cleaning rules
################################

remove_patterns:
  # Page numbers
  - pattern: 'Page \d+ of \d+'
  - pattern: '^\d+\s*$'
  
  # Headers and footers
  - pattern: 'LIRADS v\d+\.\d+.*?(?=\n|$)'
  - pattern: 'PIRADS v\d+\.\d+.*?(?=\n|$)'
  - pattern: '(?i)©.*?(?:ACR|Radiology).*?(?=\n|$)'
  
  # URLs and emails
  - pattern: 'www\..*?\.(?:com|org|edu)(?:/[^\s]*)?'
  - pattern: 'https?://[^\s]+'
  - pattern: '\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b'
  
  # Metadata sections
  - pattern: '(?:^|\n)Downloaded from.*?(?=\n\n|$)'
    multiline: true
  - pattern: 'For personal use only.*?(?=\n|$)'
  
  # Citation brackets (keep references but remove brackets)
  - pattern: '\[\d+(?:,\s*\d+)*\]'


normalization:
  # Fix hyphenated words at line breaks: "clin-\nical" → "clinical"
  dehyphenate:
    enabled: true
    pattern: '(\w+)-\s*\n\s*(\w+)'
    replacement: '\1\2'
    description: "Join words split across lines"
  
  # Clean multiple spaces: "word  word" → "word word"
  clean_whitespace:
    enabled: true
    description: "Replace multiple spaces with single space"
  
  # Clean multiple newlines (keep max 2 consecutive)
  clean_newlines:
    enabled: true
    max_consecutive: 2
    description: "Remove excessive blank lines"


manual_fixes: []
  # Example: Fix column order issue (customize for your PDFs)
  # - find: 'misplaced text here'
  #   replace: 'corrected text here'
  #   description: "Fix column merge issue on page X"
  #   apply_to: "first_occurrence"


chunking:
  method: "semantic"           # Semantic chunking (sentence-aware)
  max_size: 950                # Max characters per chunk
  overlap: 150                 # Overlap between chunks (for context)
  prefer_sentence_breaks: true # Break at sentence boundaries when possible
  min_size: 200                # Minimum chunk size
  respect_sections: true       # Try to keep sections together


quality_checks:
  enforce_overlap: true        # Ensure chunks have overlap
  max_chunk_length: 1000       # Warn if chunks exceed this
  min_chunk_length: 50         # Warn if chunks are too short
  
  # Flag these patterns if they remain after cleaning
  flag_patterns:
    - 'www\.'                  # URLs should be removed
    - '@'                      # Email symbols should be removed
    - '^\d+$'                  # Standalone page numbers